extends: ["spectral:oas"]
rules:
  openapi-v3-have-get-method:
    description: Ensures that all APIs at least have one GET method.
    message: An API must have at least one GET method.
    formats:
    - oas3
    given: "$.paths[/]"
    severity: warn
    then:
      field: get
      function: truthy

  openapi-v3-do-not-use-api-for-base-path:
    description: Ensures that paths do not use /api as part of the base path.
    message: You should not use /api as part of your base path.
    severity: warn
    given: "$.paths.*~"
    then:
      function: pattern
      functionOptions:
        notMatch: "^/api"

  openapi-v3-info-contact:
    description: Ensures that all APIs have contact information.
    message: API must have a contact information available.
    given: "$.info"
    severity: error
    recommended: true
    type: style
    formats:
    - oas3
    then:
      field: contact
      function: truthy

  openapi-v3-info-contact-email:
    description: Ensures that all APIs have contact email.
    message: API must have a contact email available.
    given: "$.info.contact"
    severity: error
    then:
      field: email
      function: truthy

  openapi-v3-info-contact-name:
    description: Ensures that all APIs have contact name.
    message: API must have a contact name available.
    given: "$.info.contact"
    severity: error
    then:
      field: name
      function: truthy

  openapi-v3-operations-tags:
    description: Ensures that each of the operations have a tags property.
    message: All of your operations need to have tags.
    severity: error
    given: "$.paths.*[get,post,patch,put,delete]"
    then:
    - field: tags
      function: truthy
